<!--pages/RepairReport/RepairReport.wxml-->
<scroll-view class="list">
    <view wx:if="{{repairList.length==0}}" class="none">暂无报修记录</view>
    <van-cell id="{{item.serial}}" wx:for="{{repairList}}" wx:key="repairListKey" title="{{item.serial}}" value="{{item.statusType}}" label="{{item.tag}}" is-link bind:click="RepairStatus" />
</scroll-view>
<view class="bottom">
    <button bindtap="scan">
        <icon class="iconfont icon-QRcode"></icon>扫码录入</button>
</view>
<van-popup show="{{ reportBoxShow }}" bind:close="onBoxClose" custom-class="reportBox">
    <view class="t">
        <text>报修录入</text>
    </view>
    <!-- <view class="desc"><text>在指定借还点进行操作时出现下列问题</text></view> -->
    <van-radio-group value="{{ radio }}" bind:change="onChange">
        <van-cell-group>
            <van-cell title="无法上锁" value-class="value-class" clickable data-name="1" bind:click="onClick">
                <van-radio name="1" />
            </van-cell>
            <van-cell title="上锁后无反应(无蜂鸣)" value-class="value-class" clickable data-name="2" bind:click="onClick">
                <van-radio name="2" />
            </van-cell>
            <van-cell title="无法开锁" value-class="value-class" clickable data-name="3" bind:click="onClick">
                <van-radio name="3" />
            </van-cell>
            <van-cell title="机械故障" value-class="value-class" clickable data-name="4" bind:click="onClick">
                <van-radio name="4" />
            </van-cell>
            <van-cell title="电量不足" value-class="value-class" clickable data-name="5" bind:click="onClick">
                <van-radio name="5" />
            </van-cell>
            <van-cell title="车辆损坏" value-class="value-class" clickable data-name="6" bind:click="onClick">
                <van-radio name="6" />
            </van-cell>
            <van-cell title="其他" value-class="value-class" clickable data-name="7" bind:click="onClick">
                <van-radio name="7" />
            </van-cell>
        </van-cell-group>
    </van-radio-group>
    <view class="confirm">
        <button bindtap="report">确定录入</button>
    </view>
</van-popup>
<van-popup show="{{ repairBoxShow }}" bind:close="onRepairBoxClose" custom-class="repairBox">
    <view class="t">
        <text>修理提交</text>
    </view>
    <!-- <view class="desc"><text>在指定借还点进行操作时出现下列问题</text></view> -->
    <view hidden="{{repairStatus>0 && repairStatus<8}}">
        <van-radio-group value="{{ repairRadio }}" bind:change="onRepairChange">
            <van-cell-group>
                <van-cell title="修理完成" value-class="value-class" clickable data-name="1" bind:click="onRepairClick">
                    <van-radio name="1" />
                </van-cell>
                <van-cell title="修理完成 - 模块变更" value-class="value-class" clickable data-name="2" bind:click="onRepairClick">
                    <van-radio name="2" />
                </van-cell>
            </van-cell-group>
            
        </van-radio-group>
        <view hidden="{{!changeBLE}}">
            <van-cell-group>
                <van-field value="" placeholder="请输入变更后模块序列号" bind:blur="onBLESerialChange"></van-field>
                <van-field value="" placeholder="请输入变更后模块MAC" bind:blur="onBLEMacChange"></van-field>
            </van-cell-group>
        </view>
    </view>
    <view hidden="{{repairStatus==0 || repairStatus>=8}}">
        <van-radio-group value="{{ repairRadio }}" bind:change="onRepairChange">
            <van-cell-group>
                <van-cell title="验收不通过" value-class="value-class" clickable data-name="8" bind:click="onRepairClick">
                    <van-radio name="8" />
                </van-cell>
                <van-cell title="验收通过" value-class="value-class" clickable data-name="9" bind:click="onRepairClick">
                    <van-radio name="9" />
                </van-cell>
            </van-cell-group>
        </van-radio-group>
    </view>
    <view class="confirm">
        <button bindtap="repairSubmit">确定提交</button>
    </view>
</van-popup>